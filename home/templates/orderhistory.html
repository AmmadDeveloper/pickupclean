<!doctype html>
<html lang="en-GB">
{% load static %}
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<head>
    <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta property="og:image" content="{% static 'imgs/339w/Asset-1mdpi.png' %}">
    <meta property="og:image:width" content="65">
    <meta property="og:image:height" content="100">
    <meta property="og:url" content="https://picupclean.com/">
    <meta property="og:site_name" content="Pick Up Clean">
    <meta property="og:locale" content="en_US">
    <meta property="og:description" content="Laundary and Cleaning Services in UK">
    <meta property="og:type" content="website">
    <meta name="description" content="Dry Cleaning, Washing and Ironing Prices from the Uk's No 1 On Demand Dry Cleaners. Suits âœ“ Laundry âœ“ Shirts âœ“ Dresses âœ“ Curtains âœ“ Repairs âœ“ Alterations âœ“ Sofa Cover">
    <meta name="keywords" content="Dry Cleaning, Wash, Ironing, Suiting in UK, Closet , Laundry,pickupclean,top laundry services, Suiting in UK,Formal Suits, Mens Suits Dry Clean, Mens Clothing Wash, Alterations, Repairs, My Suit Cleaning, Pick Up clean,pick up clean,picupclean">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, user-scalable=no">
  <title>Order History | pick up clean </title>
   <link rel="shortcut icon" href="{% static 'imgs/favicon.png' %}">
    <script src="https://kit.fontawesome.com/9cff5eee9f.js" crossorigin="anonymous"></script>
  <script src="{% static '/js/libs.js' %}"></script>
{#  <script src="{% static 's3.eu-west-2.amazonaws.com/production.storage.ihateironing.com/static/accounts/js/addresses.js' %}" data-pca-key="FW93-MZ92-GB55-AE75" data-pca-country="GB"></script>#}
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static '/css/css/styles.css' %}">

    <style>
        .no-scroll{
            position: center !important;
        }
    .btn-proceed:hover{
        color: whitesmoke;
    }
    tr td,tr th{
        text-align: center;
        padding-top: 50px;
    }
    </style>
        <style>
    tr.heading{
        cursor:pointer;
    }
    .heading .sign{
        height: 45px;
	width: 45px;
	background: #f2f2f2;
	border-radius: 50%;
	font-size: 18px;
	color: #111111;
	line-height: 44px;
	text-align: center;
	display: inline-block;
	font-weight: 600;
	cursor: pointer;
    }
    .heading .sign:after{
        content:"-";
        display:inline-block;
    }
    .heading.expand .sign:after{
        content:"+";
    }
    </style>
    <style>
        @media only screen and (max-width: 700px) {
          .hidden-sm {
            display: none;
          }
        }
        @media only screen and (max-width: 550px) {
          .hidden-sm-sm {
            display: none;
          }
        }
    </style>
</head>
<body class="light">
<header >
    <nav class="navbar navbar-default navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
          <a class="navbar-brand standard logo-container" href="{% url 'homepage' %}">
                <img src="{% static 'imgs/339w/Asset-1mdpi.png' %}" width="90px">
          </a>
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-ihi navbar-main">
              <li><a href="{% url 'homepage' %}"><span class="link-text">Order</span></a></li>
            <li class="nav-item-prices"><a href="{% url 'price' %}"><span class="link-text">Pricing</span></a></li>
            <li class="services"><a href="{% url 'services' %}"><span class="link-text">Services</span></a></li>
            <li><a href="{% url 'areas' %}"><span class="link-text">Areas</span></a></li>
            <li>
                <a href="tel:+090078601">
                  <span class="link-text">T 090 0786 01</span>
                </a>
              </li>
              {% if not user.is_authenticated %}
                  <li><a href="{% url 'login' %}"> <span class="link-text">Log in</span></a></li>
                  {% else %}
                  <li><a href="{% url 'orderhistory' %}"><span class="link-text">My Orders</span></a></li>
                  <li><a href="{% url 'profile' %}"><span class="link-text">{{ user.first_name}} {{ user.last_name }}</span></a></li>
                  <li><a href="{% url 'logout' %}"> <span class="link-text">Log out</span></a></li>
              {% endif %}

              <li>
                <form action="#" style="visibility:hidden">
  <select name="flag_dropdown" id="flag_picker" style="font-size:20px;height:auto;padding:0;border:0;letter-spacing:0;border-radius:1px;background-color:transparent;padding-top:5px;">
    <option value="GB">ðŸ‡¬ðŸ‡§</option>
  </select>
  <input type="hidden" id="currentCountryCode" name="variable" value="GB" readonly>
</form>

              </li>

          <li class="nav-btn-cta">
            <a href="{% url 'homepage' %}" class="btn btn-primary">Place an order</a>
          </li>
        </ul>

              <ol class="nav navbar-nav breadcrumb">
                <hr class="breadcrumb-hr"/>
                  <li><a href="{% url 'homepage' %}">Home</a></li>

              </ol>

      </div>
    </div>
  </nav>
</header>


  <div class="service-list-content">
    <h1 style="color: #fe6703;font-weight: bold" class="service-list-title">Your Orders</h1>
        <div class="shop__cart__table">
            <table style="width: 100%">
                <thead style="text-align: center;text-align: -webkit-center">
                    <tr>
                        <th></th>
                        <th>Id</th>
                        <th class="hidden-sm-sm">Pickup Time</th>
                        <th class="hidden-sm-sm">Dropoff Time</th>
                        <th class="hidden-sm">Order Amount</th>
                        <th>Status</th>
                        <th class="hidden-sm">Order Address</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody style="margin-top: 20px;text-align: center" id="orders">
                {% if user.is_authenticated %}
                    {% if orders %}
                        {% for item in orders %}
                            <tr class="heading expand">
                            <td><span style="margin-right: 15px" class="sign"></span></td>
                                <td style="min-width: 60px" class="cart__price">
                                        {{ item.orderid }}
                                </td>

                                <td class="cart__price hidden-sm-sm">({{ item.pickuptime }}) {{item.pickupdate}}</td>
                                <td class="cart__price hidden-sm-sm"><span style="margin-left:12px;">({{ item.dropofftime }}) {{item.dropoffdate}}</span></td>
                                <td  class="cart__price hidden-sm">Â£{{item.orderamount}}</td>
                                {% if "open" == item.orderstatus %}
                                                <td class="cart__price"><span style="font-size: large;font-weight: bold" class="badge badge-warning">{{ item.orderstatus }}</span></td>
                                            {% elif "confirmed" == item.orderstatus %}
                                                <td class="cart__price"><span style="font-size: large;font-weight: bold;background-color: #fadb14;" class="badge badge-primary">{{ item.orderstatus }}</span></td>
                                            {% elif "declined" == item.orderstatus %}
                                                <td class="cart__price"><span style="font-size: large;font-weight: bold;background-color: #f5222d;" class="badge badge-danger">{{ item.orderstatus }}</span></td>
                                            {% elif "shipped" == item.orderstatus %}
                                                <td class="cart__price"><span style="font-size: large;font-weight: bold;background-color: #722ed1;" class="badge badge-info">{{ item.orderstatus }}</span></td>
                                            {% elif "pickedup" == item.orderstatus %}
                                                <td class="cart__price"><span style="font-size: large;font-weight: bold;background-color: #fa8c16;" class="badge badge-success">{{ item.orderstatus }}</span></td>
                                            {% elif "processing" == item.orderstatus %}
                                                <td class="cart__price"><span style="font-size: large;font-weight: bold;background-color: #000000;" class="badge badge-secondary">{{ item.orderstatus }}</span></td>
                                            {% elif "cancelled" == item.orderstatus %}
                                                <td class="cart__price"><span style="font-size: large;font-weight: bold;background-color: #f5222d;" class="badge badge-danger">{{ item.orderstatus }}</span></td>
                                            {% elif "refunded" == item.orderstatus %}
                                                <td class="cart__price"><span style="font-size: large;font-weight: bold;background-color: #1890ff;" class="badge badge-warning">{{ item.orderstatus }}</span></td>
                                            {% elif "delivered" == item.orderstatus %}
                                                <td class="cart__price"><span style="font-size: large;font-weight: bold;background-color: #52c41a;" class="badge badge-warning">{{ item.orderstatus }}</span></td>
                                            {% endif %}
                                <td class="cart__total carttotal hidden-sm" ><span style="margin-left:12px;">{{ item.orderaddress }}</span></td>
                            {% if item.cancel %}
                                <td><span style="margin-right: 15px;margin-left: 15px;padding:12px;background-color: #f2f2f2;border-radius: 20px"><a onclick="editOrder(`{{ item.orderid }}`)"><i class="fa fa-edit"></i></a> </span></td>
                                <td><span style="margin-right: 15px;margin-left: 5px;padding:12px;background-color: #f2f2f2;border-radius: 20px"><a onclick="cancelOrder(`{{ item.orderid }}`)"><i class="fa fa-trash"></i></a> </span></td>
                            {% endif %}
        {#                                    {% if 'pending' == item.orderstatus %}#}
        {#                                    <td class="cart__close"><span class="icon_close" onclick="removerow(this,{{ item.id }},{{ item.total }})"></span></td>#}
        {#                                    {% endif %}#}
                            </tr>
        {#                                <tr>#}
        {#                                    <th></th>#}
        {#                                    <th>Product Name</th>#}
        {#                                    <th>Price</th>#}
        {#                                    <th>Quantity</th>#}
        {#                                    <th>Size</th>#}
        {#                                    <th>Total Price</th>#}
        {#                                    <th></th>#}
        {#                                </tr>#}
                            {% for product in item.lines %}
                                <tr style="display: none;text-align: center">
                                    <td></td>
                                    <td class="cart__product__item">
                                        <img width="75px" height="75px" src="{{product.image}}" alt="">
                                    </td>
                                    <td>
                                        <div class="cart__product__item__title">
                                            <h6>{{ product.productname }}</h6>
                                        </div>
                                    </td>
                                    <td class="hidden-sm-sm">
                                        <div class="cart__product__item__title">
                                            <h6>{{ product.categoryname }}</h6>
                                        </div>
                                    </td>
                                    <td class="cart__price hidden-sm-sm">Â£{{product.price}}</td>
                                    <td class="cart__price">{{product.quantity}}</td>

                                    <td class="cart__total carttotal" >Â£{{ product.totalprice }}</td>
                                    <td></td>
                                </tr>
                            {% endfor %}
                        {% endfor %}
                    {% else %}
                        <tr style="margin-top: 20px"><td style='text-align: center;' colspan='6'>You have placed no order yet!</td></tr>

                    {% endif %}
                {% else %}
                    <tr><td style='text-align: center' colspan='6'>You are not logged in, kindly log in to view your orders!</td></tr>
                {% endif %}
                </tbody>
            </table>
        </div>
        <div style="margin-top: 5%;text-align: center;text-align: -webkit-center" class="cart__btn">
            <a style="background-color: orangered;color: white;width: 50%" class="btn" href="{% url 'homepage' %}">Continue Shopping</a>
        </div>
  </div>

<footer class="footer">
  <div class="container">
    <div class="footer-top">
      <div class="col-md-4 footer-app-stores">
        <div class="footer-top-title">Download our new app:</div>
        <a class="ios-link" href="#">
          <img src="{% static 'images/app-stores/apple.png' %}" alt="Download on the App Store">
        </a>
        <a class="android-link" href="#">
          <img src="{% static 'images/app-stores/google.png' %}" alt="Get it on Google Play">
        </a>
      </div>
      <div class="col-md-8 sub2-newsletter footer-push">
        <div class="footer-top-title">Subscribe to our newsletter:</div>
        <div class="sub2-newsletter-content">
          <form action="#" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll" class="sub2-form-container">
              <input type="email" value="" name="EMAIL" class="sub2-input" id="mce-EMAIL" placeholder="email address" required>
              <input type="text" name="b_70163dda0059bbc6424bb415f_b7c1f868ac" tabindex="-1" value="" style="position: absolute; left: -5000px;" aria-hidden="true">
              <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="sub2-button">
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <div class="footer-payment-methods footer-push">
        <div class="footer-payment-methods-title">Accepted payment methods:</div>
        <img class="footer-payment-methods-img" src="{% static 'imgs/cards.png' %}" width="190" alt="Accepted payment methods">
      </div>
      <div class="footer-logo-wrapper footer-push">
        <div class="footer-logo">
         <img src="{% static 'imgs/339w/Asset-1mdpi.png' %}" width="90px">
        </div>
        <div class="footer-copyright">
          <div class="footer-company">Â© {% now 'Y' %} <span class="u-text-uppercase">pickupclean</span>.</div>
          <div class="footer-rights">All rights reserved.</div>
        </div>
      </div>
    </div>

  </div>
</footer>
<link rel="stylesheet" href="{% static '/css/jquery-confirm.min.css' %}">
<script src="{% static '/js/jquery-confirm.min.js' %}"></script>
  <script>
    $('.sign').click(function(){
        $(this.parentElement.parentElement).toggleClass('expand').nextUntil('tr.heading').slideToggle('fast');
    });


    function editOrder(id){
        $.confirm({
    title: false,
    content: `url:/editorder/?id=${id}`,
    closeIcon: true,
    buttons: {
        Update: {
            text: 'Update',
            btnClass: 'btn-green',
            action: function(){
                var dropoffdate=document.getElementById('dropoffdate').value;
                var picupdate=document.getElementById('picupdate').value;
                var dropoff_timeslot=document.getElementById('dropoff_timeslot').value;
                var pickup_timeslot=document.getElementById('pickup_timeslot').value;
                var orderid=document.getElementById('orderid').value;
                if(dropoffdate===""||dropoff_timeslot===""||picupdate===""||pickup_timeslot===""){
                    $.alert('Please select valid dates and timeslots"');
                }else{
                    var data={
                        "pickupdate":picupdate,
                        "dropoffdate":dropoffdate,
                        "pickup_timeslot":pickup_timeslot,
                        "dropoff_timeslot":dropoff_timeslot,
                        "order_id":orderid
                    }
                    var token=localStorage.getItem('token')
                  $.ajax({
                        url: '/api/updatetime/',
                        type: 'post',
                        headers:{'Authorization': `Bearer ${token}`},
                        dataType: 'json',
                        contentType: 'application/json',
                        success: function (data) {
                            if(data.statuscode===200){
                                $.confirm({
                                    title: false,
                                    content: `"Your order has been successfully updated"`,
                                            onDestroy: function () {
                                        // when the modal is removed from DOM
                                        window.location.href='/orderhistory/';
                                    }});
                            }
                        },
                        error:function (data){
                            $.alert("There was an error while processing your request please try again");
                        },
                        data: JSON.stringify(data)
                    });
                }
            }
        }
    }
});
    }
    function cancelOrder(id){
        $.confirm({
            title: 'Cancel?',
            content: 'Do you really want to cancel your order!',
            buttons: {
                somethingElse: {
                    text: 'Cancel',
                    btnClass: 'btn-red',
                    keys: ['enter', 'shift'],
                    action: function(){
                        var token=localStorage.getItem('token')
                        $.ajax({
                            url: `/api/order?orderid=${id}`,
                            type: 'delete',
                            headers:{'Authorization': `Bearer ${token}`},
                            dataType: 'json',
                            contentType: 'application/json',
                            success: function (data) {
                                if(data.statuscode===200){
                                    window.location.href=`{% url 'orderhistory' %}`
                                }
                            }
                        });
                    }
                },
                back: function () {
                },

            }
        });
    }
  </script>
</body>
</html>